<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>사칙연산 계산기</h1>
    <div id="output"></div>
    <script>
        var num={};
        num.inputNum=[];//사용자가 입력한 수와 연산결과
        num.inputCal=[];//사용자가 입력한 사칙연산 기호
        num.result=[];//연산과정
              
        num.input=function(){
            while(true){
                var a=Number(prompt("정수를 입력해 주세요"));
                num.inputNum.push(a)
                var b=prompt("사칙연산 기호를 입력해 주세요/q입력시 종료 및 결과 출력");
                if(b==="q"){
                    break;
                };
                num.inputCal.push(b);
            };
        };//사용자로부터 수와 연산기호를 입력받는 함수

        num.formula=function(){
            for(i=0; i<this.inputNum.length; i++){
                var a=this.inputNum[i];
                var b=this.inputCal[i];
                this.result+=a
                if(b!==undefined){
                    this.result+=b
                };
                console.log(this.result);
            };
        };//연산과정을 기록하는 함수

        num.calc=function(){
            for(i=0; i<this.inputCal.length;){
                var a=num.inputNum[i];
                var b=num.inputNum[i+1];
                if(this.inputCalc!==[]){
                    if( this.inputCal[i]==="+"){ 
                        this.inputNum.unshift(a+b);
                        this.inputNum.splice(1,2);
                        this.inputCal.splice(0,1);
                    }

                    else if( this.inputCal[i]==="-"){ 
                        this.inputNum.unshift(a-b);
                        this.inputNum.splice(1,2);
                        this.inputCal.splice(0,1);
                    }

                    else if( this.inputCal[i]==="*"){ 
                        this.inputNum.unshift(a*b);
                    this.inputNum.splice(1,2);
                    this.inputCal.splice(0,1);
                    }

                    else if( this.inputCal[i]==="/"){ 
                        this.inputNum.unshift(a/b);
                        this.inputNum.splice(1,2);
                        this.inputCal.splice(0,1);
                    }
                }
                else {break;}      
            };
        };//사칙연산을 하는 함수, 계산 결과를 input 배열의 맨앞에 넣음

        num.print=function(){
            var out = document.getElementById("output")
            out.innerHTML= this.result+"="+this.inputNum;
        }

        
        main=function(){
            console.log ("running main function...");
            num.input();
            num.formula();
            num.calc();
            num.print();
        };

        main();
    </script>
    
</body>
</html>